<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>%TITLE_TEMPLATE%</title>
    <style>
      html,
      body {
        overflow: hidden;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        touch-action: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        outline: none;
      }

      #renderCanvas {
        width: 100%;
        height: 100%;
        touch-action: none;
      }
      #approveAudioDialog {
        height: 50dvh;
        width: 50dvw;
      }
      #approveAudioDialog h1 {
        font-size: 50px;
      }
      #approveAudioButton {
        font-size: 50px;
      }
      #cancelAudioButton {
        font-size: 50px;
      }
      ::backdrop {
        backdrop-filter: blur(4px) contrast(50%);
        -webkit-backdrop-filter: blur(4px) contrast(50%);
        opacity: 0.75;
      }
    </style>
    <script src="client.js"></script>
  </head>

  <body>
    <canvas id="renderCanvas"></canvas>
    <div id="prefetchLinks" style="display: none"></div>
    <dialog id="approveAudioDialog">
      <h1>Хотите ли вы прослушать аудио сопровождение?</h1>
      <form method="dialog">
        <button id="approveAudioButton">Да</button>
        <button id="cancelAudioButton">Нет</button>
      </form>
    </dialog>
    <script>
      const dialog = document.querySelector("#approveAudioDialog");
      const approveButton = document.querySelector("#approveAudioButton");
      const cancelButton = document.querySelector("#cancelAudioButton");
      window.showApproveAudioModal = (approveCallback, cancelCallback) => {
        approveButton.addEventListener(
          "click",
          () => {
            approveCallback();
            dialog.close();
          },
          { once: true }
        );
        cancelButton.addEventListener(
          "click",
          () => {
            cancelCallback();
            dialog.close();
          },
          { once: true }
        );
        dialog.showModal();
      };
    </script>
  </body>
</html>
